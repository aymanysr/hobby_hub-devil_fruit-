<%# app/views/devil_fruits/show.html.erb %>

<div class="container">
  <h1 class="font-alpha">Your choosen Devil Fruit:</h1>
  <br>
  <%# ************** Display Specific Devil Fruit ************** %>
  <div class="container">
    <div class="card">
      <h3><%= @devil_fruit.name %> 🍓</h3>
        <% if @devil_fruit.photo.key.nil? %>
          <img src="https://cdn.shopify.com/s/files/1/0556/3822/9043/files/Fruit001.png?v=1650868361" alt="default photo">
        <% else %>
          <%= cl_image_tag @devil_fruit.photo.key, height: 300, width: 400, crop: :fill %>
        <% end %>
      <li><%= @devil_fruit.description %></li>
      <li><%= @devil_fruit.price %> Berries</li>
      <% if current_user %>
        <% if policy(@devil_fruit).edit? %>
          <li><%= link_to "Edit Devil Fruit", edit_devil_fruit_path(@devil_fruit)%></li>
        <% end %>
        <% if policy(@devil_fruit).destroy? %>
        <li><%= link_to 'Delete my Devil Fruit 🛒', devil_fruit_path(@devil_fruit), data: { "turbo-method": :delete, turbo_confirm: "Are you sure?" } %></li>
        <% end %>
        <% unless current_user == @devil_fruit.user %>
          <li><%= link_to 'Add to my Shopping Cart 🛒', devil_fruit_cart_items_path(@devil_fruit), data: { "turbo-method": :post } %></li>
        <% end %>
        <li><%= link_to 'Go to my Shopping Cart 🛒', shopping_cart_path(current_user.shopping_cart) %></li>
      <% end %>
      <li><%= link_to 'All Devil Fruits', devil_fruits_path(@devil_fruit) %></li>
    </div>
  </div>
</div>

<%# we have a user_id through shopping_cart %>
<%# we have shopping_cart id %>
<%# we have a devil_fruit_ id %>
